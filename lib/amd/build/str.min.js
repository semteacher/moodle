define ("core/str",["exports","jquery","core/ajax","core/localstorage"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.cache_strings=a.get_strings=a.get_string=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var h=[];a.get_string=function get_string(a,b,c,d){return i([{key:a,component:b,param:c,lang:d}]).then(function(a){return a[0]})};var i=function(a){var e=[],i=(0,b.default)("html").attr("lang").replace(/-/g,"_"),j=function(a){var b=a.key,c=a.component,d=a.lang,e=void 0===d?i:d;return"core_str/".concat(b,"/").concat(c,"/").concat(e)},k=a.map(function(a){var b=j(a),c=a.component,i=a.key,k=a.param,l=a.lang,m=function(a){h[b]=a;return a};if(c in M.str&&i in M.str[c]){return m(new Promise(function(a){a(M.util.get_string(i,c,k,l))}))}var n=d.default.get(b);if(n){M.str[c]=f({},M.str[c],g({},i,n));return m(new Promise(function(a){a(M.util.get_string(i,c,k,l))}))}if(b in h){return m(h[b])}else{return m(new Promise(function(a,h){e.push({methodname:"core_get_string",args:{stringid:i,stringparams:[],component:c,lang:l},done:function done(e){M.str[c]=f({},M.str[c],g({},i,e));d.default.set(b,e);a(M.util.get_string(i,c,k,l))},fail:h})}))}});if(e.length){c.default.call(e,!0,!1,!1,0,M.cfg.langrev)}return b.default.when.apply(b.default,k).then(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++){b[c]=arguments[c]}return b})};a.get_strings=i;var j=function(a){var c=(0,b.default)("html").attr("lang").replace(/-/g,"_");a.forEach(function(a){var e=a.key,f=a.component,g=a.value,i=a.lang,j=void 0===i?c:i,k=["core_str",e,f,j].join("/");if(!(f in M.str)||!(e in M.str[f])){if(!(f in M.str)){M.str[f]={}}M.str[f][e]=g}if(!d.default.get(k)){d.default.set(k,g)}if(!(k in h)){h[k]=b.default.Deferred().resolve(g).promise()}})};a.cache_strings=j});
//# sourceMappingURL=str.min.js.map
